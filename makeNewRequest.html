<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Civil Servant-makeNewSwapRequest</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Additional styles for swap page */
        
        
        .page-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .page-header p {
            color: #7f8c8d;
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.1rem;
        }
        
        .swap-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .swap-section {
            background-color: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 2rem;
        }
        
        .section-header {
            background-color: white;
            color: #2c3e50;
            padding: 1.5rem 2rem;
        }
        
        .section-header h2 {
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            
            
        }
        
        .section-content {
            padding: 2rem;
        }
        
   
        
        .action-btn.view:hover {
            background-color: #2980b9;
        }
        
        .action-btn.propose {
            background-color: #2ecc71;
            color: white;
        }
        
        .action-btn.propose:hover {
            background-color: #27ae60;
        }
        
        /* Swap Request Form */
        .swap-form {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 1.8rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-group label .required {
            color: #e74c3c;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
        }
        
        .form-column {
            flex: 1;
            min-width: 250px;
        }
        
        .info-box {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border-left: 5px solid #3498db;
        }
        
        .info-box h3 {
            margin-bottom: 1rem;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-box h3 i {
            color: #3498db;
        }
        
        .submit-btn {
            width: 100%;
            padding: 16px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .submit-btn:hover {
            background-color: #2980b9;
        }
        
        .submit-btn:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        
        .alert {
            padding: 12px 15px;
            border-radius: 5px;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }
        
        .alert-error {
            background-color: #fde8e8;
            color: #c53030;
            border-left: 4px solid #c53030;
        }
        
        .alert-success {
            background-color: #e6fffa;
            color: #234e52;
            border-left: 4px solid #38b2ac;
        }
        
        .alert-info {
            background-color: #ebf8ff;
            color: #2c5282;
            border-left: 4px solid #3498db;
        }
    
        .status-pending {
            background-color: #fef9e7;
            color: #b7950b;
        }
        
        .status-approved {
            background-color: #e8f6f3;
            color: #27ae60;
        }
        
        .status-rejected {
            background-color: #fdedec;
            color: #c0392b;
        }
        
        .status-waiting {
            background-color: #ebf5fb;
            color: #3498db;
        }
        
        .status-negotiating {
            background-color: #f4ecf7;
            color: #8e44ad;
        }
        
        .action-cell {
            display: flex;
            gap: 0.5rem;
        }

        /* Reduced Footer Size */
footer {
    padding: 1.5rem 0 !important;
}

.footer-content {
    max-width: 800px !important;
    margin: 0 auto !important;
}

.footer-logo {
    font-size: 1.5rem !important;
    margin-bottom: 0.8rem !important;
}

.footer-logo i {
    font-size: 1.7rem !important;
    margin-right: 8px !important;
}

.footer-content p {
    margin-bottom: 1rem !important;
    font-size: 0.9rem !important;
    color: #bdc3c7 !important;
}

.footer-links {
    margin-bottom: 1rem !important;
    gap: 1.5rem !important;
}

.footer-links a {
    font-size: 0.9rem !important;
}

.copyright {
    font-size: 0.8rem !important;
    color: #95a5a6 !important;
    margin-top: 1rem !important;
}
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-landmark"></i>
                <span>Civil Servant</span>
            </div>
            <ul class="nav-menu">
                <li><a href="homescreen.html">Home</a></li>
                <li><a href="profile.html">Profile</a></li>
                <li><a href="index.html">Logout</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Section 2: Submit Swap Request -->
            <div class="swap-section">
                <div class="section-header">
                    <h2><i class="fas fa-paper-plane"></i> Make Swap Request</h2>
                </div>
                
                <div class="section-content">
                    <div class="swap-form">
                        <div id="error-message" class="alert alert-error" style="display: none;">
                            Please fill in all required fields correctly.
                        </div>
                        
                        <div id="success-message" class="alert alert-
                        success" style="display: none;">
                            Your swap proposal has been sent successfully!
                        </div>
                        
                        <form id="swap-form">
                            <div class="info-box">
                                <h3><i class="fas fa-info-circle"></i> Your Position Details</h3>
                                <div class="form-row">
                                    <div class="form-column">
                                        <div class="form-group">
                                            <label for="yourDepartment">Your Department <span class="required">*</span></label>
                                            <select id="yourDepartment" class="form-control" required>
                                                <option value="">Select Department</option>
                                                <option value="education" selected>Education</option>
                                                <option value="health">Health</option>
                                                <option value="finance">Finance</option>
                                                <option value="transport">Transport</option>
                                                <option value="justice">Justice</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-column">
                                        <div class="form-group">
                                            <label for="yourPosition">Your Position <span class="required">*</span></label>
                                            <input type="text" id="yourPosition" class="form-control" placeholder="Enter your position" value="Senior Education Officer" required>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-column">
                                        <div class="form-group">
                                            <label for="yourLocation">Your Location <span class="required">*</span></label>
                                            <input type="text" id="yourLocation" class="form-control" placeholder="Enter your location" value="Capital City" required>
                                        </div>
                                    </div>
                                    <div class="form-column">
                                        <div class="form-group">
                                            <label for="yourGrade">Your Grade Level <span class="required">*</span></label>
                                            <select id="yourGrade" class="form-control" required>
                                                <option value="">Select Grade Level</option>
                                                <option value="6" selected>Level 6</option>
                                                <option value="7">Level 7</option>
                                                <option value="8">Level 8</option>
                                                <option value="9">Level 9</option>
                                                <option value="10">Level 10</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="info-box">
                                <h3><i class="fas fa-user-friends"></i>Destination (Where you want to go?)</h3>
                                <div class="form-group">
                                    <!--<label for="swapPartner">Select Swap Partner <span class="required">*</span></label> -->

                                    <select id="swapPartner" class="form-control" required>
                                        <option value="">Select District</option>
                                        <option value="zomba">Zomba</option>
                                        <option value="Chiradzulo">Chiradzulo</option>
                                        <option value="Mphalombe">Mphalombe</option>
                                        <option value="Chitipa">Chitipa</option>
                                        <option value="rumphi">Rumphi</option>
                                        <option value="Lilongwe">Lilongwe City</option>
                                        <option value="blantyre city">Blantyre City</option>
                                        <option value="blantyre rural">Blantyre rural</option>
                                        <option value="zomba city">Zomba city</option>
                                        <option value="zomba rural">Zomba rural</option>
                                        <option value="mzuzu">Mzuzu</option>
                                        <option value="karonga">Karonga</option>
                                        <option value="mulanje">Mulanje</option>
                                        <option value="nsanje">Nsanje</option>
                                        <option value="salima">Salima</option>
                                        <option value="dedza">Dedza</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="preferredSwapDate">Preferred Swap Date <span class="required">*</span></label>
                                    <input type="date" id="preferredSwapDate" class="form-control" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="swapReason">Reason for Swap <span class="required">*</span></label>
                                <textarea id="swapReason" class="form-control" placeholder="Explain why you want to swap positions and what you hope to achieve..." required></textarea>
                            </div>
                       
                            <div class="form-group">
                                <div class="checkbox">
                                    <input type="checkbox" id="swapAgreement" required>
                                    <label for="swapAgreement">
                                        I understand that this swap proposal is subject to approval from both departments and HR. 
                                        I confirm that all information provided is accurate.
                                        <span class="required">*</span>
                                    </label>
                                </div>
                            </div>
                            
                            <button type="submit" class="submit-btn" id="submitButton">
                                <i class="fas fa-exchange-alt"></i>
                                <span id="buttonText">Submit Swap Proposal</span>
                                <span id="buttonSpinner" style="display: none;">
                                    <i class="fas fa-spinner fa-spin"></i> Sending...
                                </span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <i class="fas fa-landmark"></i>
                <span>Civil Servant</span>
            </div>
            <p>Streamlining administrative processes for government employees since 2023</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Contact Us</a>
            </div>
            <p class="copyright">&copy; <span class="current-year">2023</span> Civil Servant Portal. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        // Save new swap request to localStorage for homescreen display
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved user data
            loadSavedUserData();
            
            const form = document.getElementById('swap-form');
            const successMessage = document.getElementById('success-message');

            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();

                    // Build request object
                    const requester = localStorage.getItem('currentUserName') || 'Anonymous User';
                    const req = {
                        id: Date.now(),
                        requester: requester,
                        department: document.getElementById('yourDepartment').value || '',
                        position: document.getElementById('yourPosition').value || '',
                        location: document.getElementById('yourLocation').value || '',
                        grade: document.getElementById('yourGrade').value || '',
                        desiredLocation: document.getElementById('swapPartner').value || '',
                        partner: document.getElementById('swapPartner').value || '',
                        date: document.getElementById('preferredSwapDate').value || '',
                        reason: document.getElementById('swapReason').value || '',
                        submissionDate: new Date().toLocaleString(),
                        status: 'pending'
                    };

                    // Save to localStorage under 'swapRequests' for homescreen
                    try {
                        const existing = JSON.parse(localStorage.getItem('swapRequests') || '[]');
                        existing.unshift(req);
                        localStorage.setItem('swapRequests', JSON.stringify(existing));

                        if (successMessage) successMessage.style.display = 'block';

                        // Redirect to homescreen to show recent applications
                        setTimeout(function() {
                            window.location.href = 'homescreen.html';
                        }, 800);
                    } catch (err) {
                        alert('Failed to save request locally.');
                    }
                });
            }
            
            // Load saved user data from localStorage and populate form
            function loadSavedUserData() {
                const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                
                // Populate your department
                if (userData.department) {
                    const deptSelect = document.getElementById('yourDepartment');
                    if (deptSelect) {
                        const deptValue = userData.department.toLowerCase();
                        const options = Array.from(deptSelect.options);
                        const matchingOption = options.find(opt => opt.value.toLowerCase() === deptValue);
                        if (matchingOption) {
                            deptSelect.value = matchingOption.value;
                        }
                    }
                }
                
                // Populate your position
                if (userData.position) {
                    const positionInput = document.getElementById('yourPosition');
                    if (positionInput) {
                        positionInput.value = userData.position;
                    }
                }
                
                // Populate your location
                if (userData.workLocation) {
                    const locationInput = document.getElementById('yourLocation');
                    if (locationInput) {
                        locationInput.value = userData.workLocation;
                    }
                }
                
                // Populate your grade level
                if (userData.gradeLevel) {
                    const gradeSelect = document.getElementById('yourGrade');
                    if (gradeSelect) {
                        gradeSelect.value = userData.gradeLevel;
                    }
                }
            }
        });
    </script>

</body>
</html>